{"version":3,"sources":["terminal.js"],"names":["document","addEventListener","querySelector","classList","remove","pairs","Array","from","querySelectorAll","map","toggler","togglees","JSON","parse","dataset","toggle","i","getElementById","el","visible","forEach","_ref","ev","preventDefault","instruction","prev","next","ModalWindow","Swiper","simulateTouch","observer","observeParents","navigation","prevEl","nextEl","element","lining","timeline","arguments","length","undefined","_classCallCheck","this","busy","setState","_createClass","key","value","state","Error","notify","modalState","getState","_this","cb","isState","isBusy","occupy","setTimeout","vacate","_this2","id","modalToggler","modal","_ref2","listener","removeEventListener","open","liningListener","console","log","close"],"mappings":"6XAAAA,SAASC,iBAAiB,mBAAqB,WAC7CD,SAASE,cAAc,QAAQC,UAAUC,OAAO,SAEhD,IAAMC,EAAQC,MAAMC,KAAMP,SAASQ,iBAAiB,kBAAmBC,IAAI,SAAAC,GAKzE,MAAO,CAAEA,QAAAA,EAASC,SAJNC,KAAKC,MAAMH,EAAQI,QAAQC,QAElBN,IAAI,SAAAO,GAAA,OAAKhB,SAASiB,eAAeD,QAKlDD,EAAS,SAACG,GACW,QAAtBA,EAAGJ,QAAQK,QAMdD,EAAGJ,QAAQK,SAAU,EALnBD,EAAGJ,QAAQK,SAAU,GAUzBd,EAAMe,QAAQ,SAAAC,GAA2B,IAAxBX,EAAwBW,EAAxBX,QAASC,EAAeU,EAAfV,SACxBD,EAAQT,iBAAiB,QAAS,SAACqB,GACjCA,EAAGC,iBAEHZ,EAASS,QAAQL,OAMrB,IAAMS,EAAcxB,SAASiB,eAAe,qBACtCQ,EAAOzB,SAASiB,eAAe,0BAC/BS,EAAO1B,SAASiB,eAAe,0BAgB/BU,GAHGH,GAAc,IAAII,OAAOJ,EAXlB,CACdK,eAAe,EACfC,UAAU,EACVC,gBAAgB,EAChBC,WAAY,CACVC,OAAQR,EACRS,OAAQR,KA3CuC,WAoDjD,SAAAC,EAAYQ,EAASC,GAAwB,IAAhBC,EAAgB,EAAAC,UAAAC,aAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAL,IAAKG,gBAAAC,KAAAf,GAC3Ce,KAAKxB,GAAKiB,EACVO,KAAKN,OAASA,EACdM,KAAKL,SAAWA,EAChBK,KAAKC,MAAO,EAEZD,KAAKE,SAAS,UA1DiC,OAAAC,aAAAlB,EAAA,CAAA,CAAAmB,IAAA,WAAAC,MAAA,SA6DxCC,GACP,OAAQA,GACN,IAAK,OACHN,KAAKM,MAAQ,OACb,MACF,IAAK,SACHN,KAAKM,MAAQ,SACb,MACF,IAAK,UACHN,KAAKM,MAAQ,UACb,MACF,IAAK,UACHN,KAAKM,MAAQ,UACb,MACF,QACE,OAAO,IAAIC,MAAM,4BAKrB,OAFAP,KAAKQ,SAEER,OAjFwC,CAAAI,IAAA,SAAAC,MAAA,WAqF/CL,KAAKxB,GAAGJ,QAAQqC,WAAaT,KAAKM,MAClCN,KAAKN,OAAOtB,QAAQqC,WAAaT,KAAKM,QAtFS,CAAAF,IAAA,WAAAC,MAAA,WA0F/C,OAAOL,KAAKM,QA1FmC,CAAAF,IAAA,UAAAC,MAAA,SA6FzCC,GACN,OAAON,KAAKU,aAAeJ,IA9FoB,CAAAF,IAAA,OAAAC,MAAA,WAiG7B,IAAAM,EAAAX,KAAfY,EAAe,EAAAhB,UAAAC,aAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAV,aACR,OAAGI,KAAKa,QAAQ,UAAWb,KAAKc,WAEhCd,KAAKe,SACLf,KAAKE,SAAS,WAEdc,WAAW,WAIT,OAHAL,EAAKT,SAAS,QACdS,EAAKM,SAEEL,KACNZ,KAAKL,UAEDK,QA9GwC,CAAAI,IAAA,QAAAC,MAAA,WAiH5B,IAAAa,EAAAlB,KAAfY,EAAe,EAAAhB,UAAAC,aAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAV,aACT,OAAGI,KAAKa,QAAQ,YAAab,KAAKc,WAElCd,KAAKe,SACLf,KAAKE,SAAS,WAEdc,WAAW,WAIT,OAHAE,EAAKhB,SAAS,UACdgB,EAAKD,SAEEL,KACNZ,KAAKL,UAEDK,QA9HwC,CAAAI,IAAA,SAAAC,MAAA,WAkI/C,QAASL,KAAKC,OAlIiC,CAAAG,IAAA,SAAAC,MAAA,WAsI/CL,KAAKC,MAAO,IAtImC,CAAAG,IAAA,SAAAC,MAAA,WA0I/CL,KAAKC,MAAO,MA1ImChB,EAAA,IA8I7CS,EAASpC,SAASiB,eAAe,UAExBX,MAAMC,KAAMP,SAASQ,iBAAiB,yBAA0BC,IAAI,SAAAS,GACjF,IAAM2C,EAAK3C,EAAGJ,QAAQgD,aAChBC,EAAQ/D,SAASiB,eAAe4C,GAEtC,OAAOE,EAAQ,CAAErD,QAASQ,EAAI6C,MAAO,IAAIpC,EAAYoC,EAAO3B,IAAY,OAGnEhB,QAAQ,SAAA4C,GAAwB,IAArBtD,EAAqBsD,EAArBtD,QAASqD,EAAYC,EAAZD,MACnBE,EAAW,SAAXA,EAAY3C,GAChBA,EAAGC,iBAEHb,EAAQwD,oBAAoB,QAASD,GAErCF,EAAMI,KAAK,WACT/B,EAAOnC,iBAAiB,QAASmE,MAO/BA,EAAiB,SAAjBA,EAAkB9C,GACtB+C,QAAQC,IAAI,UAEZhD,EAAGC,iBAEHa,EAAO8B,oBAAoB,QAASE,GAEpCL,EAAMQ,MAAM,WACV7D,EAAQT,iBAAiB,QAASgE,MAMtCvD,EAAQT,iBAAiB,QAASgE,OAIlC","file":"main.js","sourcesContent":["document.addEventListener('DOMContentLoaded', (() => {\n  document.querySelector('html').classList.remove('no-js');\n\n  const pairs = Array.from( document.querySelectorAll('[data-toggle]') ).map(toggler => {\n    const ids = JSON.parse(toggler.dataset.toggle);\n\n    const togglees = ids.map(i => document.getElementById(i));\n\n    return { toggler, togglees };\n  });\n\n  const toggle = (el) => {\n    if(el.dataset.visible == 'true') {\n      el.dataset.visible = false;\n\n      return;\n    }\n\n    el.dataset.visible = true;\n\n    return;\n  }\n\n  pairs.forEach(({ toggler, togglees }) => {\n    toggler.addEventListener('click', (ev) => {\n      ev.preventDefault();\n\n      togglees.forEach(toggle);\n\n      return;\n    });\n  });\n\n  const instruction = document.getElementById('instruction-steps');\n  const prev = document.getElementById('instruction-steps-prev');\n  const next = document.getElementById('instruction-steps-next');\n\n  const options = {\n    simulateTouch: false,\n    observer: true,\n    observeParents: true,\n    navigation: {\n      prevEl: prev,\n      nextEl: next,\n    }\n  }\n\n  const swiper = (() => {\n    return instruction ? new Swiper(instruction, options) : null;\n  })();\n\n  class ModalWindow {\n    constructor(element, lining, timeline = 500) {\n      this.el = element;\n      this.lining = lining;\n      this.timeline = timeline;\n      this.busy = false;\n\n      this.setState('closed');\n    }\n\n    setState(state) {\n      switch (state) {\n        case 'open':\n          this.state = 'open';\n          break;\n        case 'closed':\n          this.state = 'closed';\n          break;\n        case 'opening':\n          this.state = 'opening';\n          break;\n        case 'closing':\n          this.state = 'closing';\n          break;\n        default:\n          return new Error('ModalWindow: Wrong State');\n      }\n\n      this.notify();\n\n      return this;\n    }\n\n    notify() {\n      this.el.dataset.modalState = this.state;\n      this.lining.dataset.modalState = this.state;\n    }\n\n    getState() {\n      return this.state;\n    }\n\n    isState(state) {\n      return this.getState() === state;\n    }\n\n    open(cb = () => {}) {\n      if(this.isState('open') || this.isBusy()) return false;\n\n      this.occupy();\n      this.setState('opening');\n\n      setTimeout(() => {\n        this.setState('open');\n        this.vacate();\n\n        return cb();\n      }, this.timeline);\n\n      return this;\n    }\n\n    close(cb = () => {}) {\n      if(this.isState('closed') || this.isBusy()) return false;\n\n      this.occupy();\n      this.setState('closing');\n\n      setTimeout(() => {\n        this.setState('closed');\n        this.vacate();\n\n        return cb();\n      }, this.timeline);\n\n      return this;\n    }\n\n    isBusy() {\n      return !!this.busy;\n    }\n\n    occupy() {\n      this.busy = true;\n    }\n\n    vacate() {\n      this.busy = false;\n    }\n  }\n\n  const lining = document.getElementById('lining');\n\n  const modals = Array.from( document.querySelectorAll('[data-modal-toggler]') ).map(el => {\n    const id = el.dataset.modalToggler;\n    const modal = document.getElementById(id);\n\n    return modal ? { toggler: el, modal: new ModalWindow(modal, lining) } : null;\n  });\n\n  modals.forEach(({ toggler, modal }) => {\n    const listener = (ev) => {\n      ev.preventDefault();\n\n      toggler.removeEventListener('click', listener);\n\n      modal.open(() => {\n        lining.addEventListener('click', liningListener);\n\n        return;\n      });\n\n    }\n\n    const liningListener = (ev) => {\n      console.log('lining');\n\n      ev.preventDefault();\n\n      lining.removeEventListener('click', liningListener);\n\n      modal.close(() => {\n        toggler.addEventListener('click', listener);\n\n        return;\n      })\n    }\n\n    toggler.addEventListener('click', listener);\n  });\n\n\n}), false);\n"]}