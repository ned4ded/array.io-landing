"use strict";var _createClass=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}document.addEventListener("DOMContentLoaded",function(){document.querySelector("html").classList.remove("no-js");var t=Array.from(document.querySelectorAll("[data-toggle]")).map(function(t){return{toggler:t,togglees:JSON.parse(t.dataset.toggle).map(function(t){return document.getElementById(t)})}}),i=function(t){"true"!=t.dataset.visible?t.dataset.visible=!0:t.dataset.visible=!1};t.forEach(function(t){var e=t.toggler,n=t.togglees;e.addEventListener("click",function(t){t.preventDefault(),n.forEach(i)})});var e=document.getElementById("instruction-steps"),n=document.getElementById("instruction-steps-prev"),s=document.getElementById("instruction-steps-next"),a=(e&&new Swiper(e,{simulateTouch:!1,observer:!0,observeParents:!0,navigation:{prevEl:n,nextEl:s}}),function(){function i(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:500;_classCallCheck(this,i),this.el=t,this.lining=e,this.timeline=n,this.busy=!1,this.setState("closed")}return _createClass(i,[{key:"setState",value:function(t){switch(t){case"open":this.state="open";break;case"closed":this.state="closed";break;case"opening":this.state="opening";break;case"closing":this.state="closing";break;default:return new Error("ModalWindow: Wrong State")}return this.notify(),this}},{key:"notify",value:function(){this.el.dataset.modalState=this.state,this.lining.dataset.modalState=this.state}},{key:"getState",value:function(){return this.state}},{key:"isState",value:function(t){return this.getState()===t}},{key:"open",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};return!this.isState("open")&&!this.isBusy()&&(this.occupy(),this.setState("opening"),setTimeout(function(){return t.setState("open"),t.vacate(),e()},this.timeline),this)}},{key:"close",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};return!this.isState("closed")&&!this.isBusy()&&(this.occupy(),this.setState("closing"),setTimeout(function(){return t.setState("closed"),t.vacate(),e()},this.timeline),this)}},{key:"isBusy",value:function(){return!!this.busy}},{key:"occupy",value:function(){this.busy=!0}},{key:"vacate",value:function(){this.busy=!1}}]),i}()),o=document.getElementById("lining");Array.from(document.querySelectorAll("[data-modal-toggler]")).map(function(t){var e=t.dataset.modalToggler,n=document.getElementById(e);return n?{toggler:t,modal:new a(n,o)}:null}).forEach(function(t){var n=t.toggler,i=t.modal,s=function t(e){e.preventDefault(),n.removeEventListener("click",t),i.open(function(){o.addEventListener("click",a)})},a=function t(e){e.preventDefault(),o.removeEventListener("click",t),i.close(function(){n.addEventListener("click",s)})};n.addEventListener("click",s)});var r=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;_classCallCheck(this,n),this.el=t,this.openTime=e,this.vacate(),this.setState("closed")}return _createClass(n,[{key:"setState",value:function(t){switch(t){case"open":this.state="open";break;case"closed":this.state="closed";break;case"opening":this.state="opening";break;case"closing":this.state="closing";break;default:return new Error("ModalWindow: Wrong State")}return this.notify(),this}},{key:"notify",value:function(){this.el.dataset.animationProcess=this.state}},{key:"getState",value:function(){return this.state}},{key:"isState",value:function(t){return this.getState()===t}},{key:"open",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};return!this.isState("open")&&!this.isBusy()&&(this.occupy(),this.setState("opening"),setTimeout(function(){return t.setState("open"),t.vacate(),e()},this.openTime),this)}},{key:"close",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};return!this.isState("closed")&&!this.isBusy()&&(this.occupy(),this.setState("closing"),setTimeout(function(){return t.setState("closed"),t.vacate(),e()},this.openTime),this)}},{key:"isBusy",value:function(){return!!this.busy}},{key:"occupy",value:function(){this.busy=!0}},{key:"vacate",value:function(){this.busy=!1}}]),n}(),c=document.querySelector("[data-animation-process]"),u=new r(c),l=function(t,e){var n=t+.1*e<0,i=0<t+.9*e-window.innerHeight;return n||i?"out":"in"};!function t(e){var n=c.getBoundingClientRect(),i=n.top,s=n.height;window.removeEventListener("scroll",t),u.isState("closed")&&"in"===l(i,s)?u.open(function(){t()}):u.isState("open")&&"out"===l(i,s)?u.close(function(){t()}):window.addEventListener("scroll",t)}();var h=anime.path("#cube-path-top");anime({targets:"#cube-path-top",strokeDashoffset:[anime.setDashoffset,0],easing:"easeInOutSine",duration:1500,delay:function(t,e){return 250*e}}),anime({targets:"#cube-point-top",cx:h("x"),cy:h("y")})},!1);
//# sourceMappingURL=main.js.map
