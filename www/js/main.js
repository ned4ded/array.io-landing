"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var VidePlayer=function(){function i(e,t){var n=this;2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(_classCallCheck(this,i),this.play=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};return!(n.isState("play")||n.isBusy()||!n.loaded)&&(n.occupy(),n.setState("playing"),e&&n.player.playVideo(),setTimeout(function(){return n.setState("play"),n.vacate(),t()},n.timeline),n)},this.pause=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};return!(n.isState("pause")||n.isBusy()||!n.loaded)&&(e&&n.player.pauseVideo(),n.occupy(),n.setState("pausing"),setTimeout(function(){return n.setState("pause"),n.vacate(),t()},n.timeline),n)},this.frame=e,this.toggler=t,this.timeline=500,this.loaded=!1,this.busy=!1,this.setState("loading"),this.frameID=e.getAttribute("id"),!this.frameID)throw new Error("VideoPlayer: Specify frame ID")}return _createClass(i,[{key:"setState",value:function(e){switch(e){case"loading":this.state="loading";break;case"pause":this.state="pause";break;case"play":this.state="play";break;case"pausing":this.state="pausing";break;case"playing":this.state="playing";break;default:return new Error("VideoPlayer: Wrong State")}return this.notify(),this}},{key:"notify",value:function(){this.frame.dataset.videoPlayerState=this.state,this.toggler.dataset.videoPlayerState=this.state}},{key:"getState",value:function(){return this.state}},{key:"isState",value:function(e){return this.getState()===e}},{key:"isBusy",value:function(){return!!this.busy}},{key:"occupy",value:function(){this.busy=!0}},{key:"vacate",value:function(){this.busy=!1}},{key:"load",value:function(){var t=this;if(!this.loaded){this.loaded=!0;return this.player=new YT.Player(this.frame,{events:{onReady:function(e){t.setState("pause"),t.toggler.addEventListener("click",t.play.bind(!0))},onStateChange:function(e){return e.data===YT.PlayerState.PAUSED||e.data===YT.PlayerState.ENDED?t.pause(!1):e.data===YT.PlayerState.PLAYING?t.play(!1):void 0}}}),this}}}]),i}(),playerElements=function(){var e=document.getElementById("video-player"),t=document.getElementById("video-toggler");if(!(!t|!e))return{player:e,toggler:t}}(),player=new VidePlayer(playerElements.player,playerElements.toggler);function onYouTubeIframeAPIReady(){player.load()}document.addEventListener("DOMContentLoaded",function(){document.querySelector("html").classList.remove("no-js");var e=Array.from(document.querySelectorAll("[data-toggle]")).map(function(e){return{toggler:e,togglees:JSON.parse(e.dataset.toggle).map(function(e){return document.getElementById(e)})}}),i=function(e){"true"!=e.dataset.visible?e.dataset.visible=!0:e.dataset.visible=!1};e.forEach(function(e){var t=e.toggler,n=e.togglees;t.addEventListener("click",function(e){e.preventDefault(),n.forEach(i)})});var t=document.getElementById("instruction-steps"),n=document.getElementById("instruction-steps-prev"),a=document.getElementById("instruction-steps-next"),s=(t&&new Swiper(t,{simulateTouch:!1,observer:!0,observeParents:!0,navigation:{prevEl:n,nextEl:a}}),function(){function i(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:500;_classCallCheck(this,i),this.listener=function(e){e.preventDefault()},this.el=e,this.lining=t,this.timeline=n,this.busy=!1,this.setState("closed")}return _createClass(i,[{key:"setState",value:function(e){switch(e){case"open":this.state="open";break;case"closed":this.state="closed";break;case"opening":this.state="opening";break;case"closing":this.state="closing";break;default:return new Error("ModalWindow: Wrong State")}return this.notify(),this}},{key:"notify",value:function(){this.el.dataset.modalState=this.state,this.lining.dataset.modalState=this.state}},{key:"getState",value:function(){return this.state}},{key:"isState",value:function(e){return this.getState()===e}},{key:"open",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};return!this.isState("open")&&!this.isBusy()&&(window.addEventListener("touchmove",this.listener),window.addEventListener("wheel",this.listener),this.occupy(),this.setState("opening"),setTimeout(function(){return e.setState("open"),e.vacate(),t()},this.timeline),this)}},{key:"close",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};return!this.isState("closed")&&!this.isBusy()&&(this.occupy(),this.setState("closing"),setTimeout(function(){return e.setState("closed"),e.vacate(),window.removeEventListener("touchmove",e.listener),window.removeEventListener("wheel",e.listener),t()},this.timeline),this)}},{key:"isBusy",value:function(){return!!this.busy}},{key:"occupy",value:function(){this.busy=!0}},{key:"vacate",value:function(){this.busy=!1}}]),i}()),o=document.getElementById("lining");Array.from(document.querySelectorAll("[data-modal-toggler]")).map(function(e){var t=e.dataset.modalToggler,n=document.getElementById(t);return n?{toggler:e,modal:new s(n,o)}:null}).forEach(function(e){var n=e.toggler,i=e.modal,a=function e(t){t.preventDefault(),n.removeEventListener("click",e),i.open(function(){o.addEventListener("click",s)})},s=function e(t){t.preventDefault(),o.removeEventListener("click",e),i.close(function(){n.addEventListener("click",a)})};n.addEventListener("click",a)});var r=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;_classCallCheck(this,n),this.el=e,this.openTime=t,this.vacate(),this.setState("closed")}return _createClass(n,[{key:"setState",value:function(e){switch(e){case"open":this.state="open";break;case"closed":this.state="closed";break;case"opening":this.state="opening";break;case"closing":this.state="closing";break;default:return new Error("ModalWindow: Wrong State")}return this.notify(),this}},{key:"notify",value:function(){this.el.dataset.animationProcess=this.state}},{key:"getState",value:function(){return this.state}},{key:"isState",value:function(e){return this.getState()===e}},{key:"open",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};return!this.isState("open")&&!this.isBusy()&&(this.occupy(),this.setState("opening"),setTimeout(function(){return e.setState("open"),e.vacate(),t()},this.openTime),this)}},{key:"close",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){};return!this.isState("closed")&&!this.isBusy()&&(this.occupy(),this.setState("closing"),setTimeout(function(){return e.setState("closed"),e.vacate(),t()},this.openTime),this)}},{key:"isBusy",value:function(){return!!this.busy}},{key:"occupy",value:function(){this.busy=!0}},{key:"vacate",value:function(){this.busy=!1}}]),n}(),u=document.querySelector("[data-animation-process]"),l=new r(u),c=function(e,t){var n=e+.1*t<0,i=0<e+.9*t-window.innerHeight;return n||i?"out":"in"};!function e(t){var n=u.getBoundingClientRect(),i=n.top,a=n.height;window.removeEventListener("scroll",e),l.isState("closed")&&"in"===c(i,a)?l.open(function(){e()}):l.isState("open")&&"out"===c(i,a)?l.close(function(){e()}):window.addEventListener("scroll",e)}();var d=function(){function i(e){var t=this;_classCallCheck(this,i),this.pause=function(){t.animation.pause(),t.animation=null,window.removeEventListener("wheel",t.pause),window.removeEventListener("touchstart",t.pause)},this.link=e;var n=this.link.getAttribute("href");if(!n||"#"!==n.slice(0,1))throw new Error("SmoothScroll: Wrong element passed");this.target=document.getElementById(n.slice(1)),this.link.addEventListener("click",function(e){e.preventDefault(),t.go()})}return _createClass(i,[{key:"getCurrentPosition",value:function(){return this.target?(window.scrollY||document.documentElement.scrollTop)+this.target.getBoundingClientRect().top:0}},{key:"go",value:function(){var e=this;this.animation=anime({targets:[document.body,document.documentElement],scrollTop:this.getCurrentPosition(),duration:600,easing:"easeInOutQuart",autoplay:!1,complete:function(){window.removeEventListener("wheel",e.pause),window.removeEventListener("touchstart",e.pause)}}),window.addEventListener("wheel",this.pause),window.addEventListener("touchstart",this.pause),this.animation.restart()}}]),i}();Array.from(document.querySelectorAll("[data-smooth-scroll]")).forEach(function(e){return new d(e)});!function(){if(player){var e=document.createElement("script");e.src="//www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}}();Array.from(document.querySelectorAll("[data-levitate]")).reduce(function(e,t){return setTimeout(function(){anime({targets:t,top:["10px","-10px"],loop:!0,direction:"alternate",easing:"easeInOutCubic",duration:1e3,delay:0})},e),e+200},0)},!1);
//# sourceMappingURL=main.js.map
